<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Quartz学习———Quartz介绍(一) | 守望的稻草人</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Quartz学习———Quartz介绍(一)</h1><a id="logo" href="/.">守望的稻草人</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">Quartz学习———Quartz介绍(一)</h1><div class="post-meta"><a href="/2017/12/27/Quartz学习——Quartz介绍-一/#comments" class="comment-count"><i id="changyan_count_unit" data-xid="2017/12/27/Quartz学习——Quartz介绍-一/"></i>留言,<i id="changyan_parti_unit" data-xid="2017/12/27/Quartz学习——Quartz介绍-一/"></i>参与</a><p><span class="date">Dec 27, 2017</span><span><a href="/categories/quartz/" class="category">quartz</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h1 id="一：介绍"><a href="#一：介绍" class="headerlink" title="一：介绍"></a>一：介绍</h1><p>Quartz是OpenSymphony开源组织在Job scheduling领域又一个开源项目，是完全由java开发的一个开源的任务日程管理系统，“任务进度管理器”就是一个在预先确定（被纳入日程）的时间到达时，负责执行（或者通知）其他软件组件的系统。<br>Quartz用一个小Java库发布文件（.jar文件），这个库文件包含了所有Quartz核心功能。这些功能的主要接口(API)是Scheduler接口。它提供了简单的操作，例如：将任务纳入日程或者从日程中取消，开始/停止/暂停日程进度。</p>
<h1 id="二：quartz核心概念"><a href="#二：quartz核心概念" class="headerlink" title="二：quartz核心概念"></a>二：quartz核心概念</h1><p>先来看一张图：<br><img src="/2017/12/27/Quartz学习——Quartz介绍-一/quartz.png" alt="quartz"></p>
<ul>
<li><p>Job( 任务，即被调度的任务)：要由表示要执行的“作业”的类实现的接口。只有一个方法 void execute(jobExecutionContext context) (jobExecutionContext 提供调度上下文各种信息，运行时数据保存在jobDataMap中) Job有个子接口StatefulJob ,代表有状态任务。</p>
</li>
<li><p>JobDetail：Quartz在每次执行Job时，都重新创建一个Job实例，所以它不直接接受一个Job的实例，相反它接收一个Job实现类，以便运行时通过newInstance()的反射机制实例化Job。因此需要通过一个类来描述Job的实现类及其它相关的静态信息，如Job名字、描述、关联监听器等信息，JobDetail承担了这一角色。<br>  传递给定作业实例的详细信息属性。 JobDetails将使用JobBuilder创建/定义。 </p>
</li>
<li><p>Trigger(触发器)：用于定义任务调度时间规则。是一个类，描述触发Job执行的时间触发规则。使用TriggerBuilder实例化实际触发器。主要有SimpleTrigger和CronTrigger这两个子类。当仅需触发一次或者以固定时间间隔周期执行，SimpleTrigger是最适合的选择；而CronTrigger则可以通过Cron表达式定义出各种复杂时间规则的调度方案：如每早晨9:00执行，周一、周三、周五下午5:00执行等；</p>
</li>
<li><p>Calendar：org.quartz.Calendar和java.util.Calendar不同，它是一些日历特定时间点的集合（可以简单地将org.quartz.Calendar看作java.util.Calendar的集合——java.util.Calendar代表一个日历时间点，无特殊说明后面的Calendar即指org.quartz.Calendar）。一个Trigger可以和多个Calendar关联，以便排除或包含某些时间点。假设，我们安排每周星期一早上10:00执行任务，但是如果碰到法定的节日，任务则不执行，这时就需要在Trigger触发机制的基础上使用Calendar进行定点排除。</p>
</li>
<li><p>Scheduler(任务调度器)：这是Quartz Scheduler的主要接口，代表一个Quartz的独立运行容器，Trigger和JobDetail可以注册到Scheduler中，两者在Scheduler中拥有各自的组及名称，组及名称是Scheduler查找定位容器中某一对象的依据，Trigger的组及名称必须唯一，JobDetail的组和名称也必须唯一（但可以和Trigger的组和名称相同，因为它们是不同类型的）。Scheduler定义了多个接口方法，允许外部通过组及名称访问和控制容器中Trigger和JobDetail。<br>一旦注册，调度程序负责执行作业，当他们的相关联的触发器触发（当他们的预定时间到达时）。</p>
</li>
<li><p>QuartzSchedulerThread ：负责执行向QuartzScheduler注册的触发Trigger的工作的线程。 </p>
</li>
<li><p>ThreadPool：Scheduler使用一个线程池作为任务运行的基础设施，任务通过共享线程池中的线程提供运行效率。 </p>
</li>
<li><p>QuartzSchedulerResources：包含创建QuartzScheduler实例所需的所有资源（JobStore，ThreadPool等）。 </p>
</li>
<li><p>SchedulerFactory( 调度程序工厂) ：提供用于获取调度程序实例的客户端可用句柄的机制。 </p>
</li>
<li><p>JobStore： 通过类实现的接口，这些类要为org.quartz.core.QuartzScheduler的使用提供一个org.quartz.Job和org.quartz.Trigger存储机制。作业和触发器的存储应该以其名称和组的组合为唯一性。</p>
</li>
<li><p>QuartzScheduler ：这是Quartz的核心，它是org.quartz.Scheduler接口的间接实现，包含调度org.quartz.Jobs，注册org.quartz.JobListener实例等的方法。  </p>
</li>
</ul>
<h1 id="三：Quartz中的设计模式"><a href="#三：Quartz中的设计模式" class="headerlink" title="三：Quartz中的设计模式"></a>三：Quartz中的设计模式</h1><ol>
<li>Builder模式<br>所有关键组件都有Builder模式来构建  <builder> 如:JobBuilder、TriggerBuilder</builder></li>
<li>Factory模式<br>最终由Scheduler的来进行组合各种组件  <factory> 如SchedulerFactory</factory></li>
<li>组件模式<br>Quartz项目中大量使用组件模式，插件式设计，可插拔，耦合性低，易扩展，开发者可自行定义自己的Job、Trigger等组件</li>
<li>链式写法<br>Quartz中大量使用链式写法，与jQuery的写法有几分相似，实现也比较简单，如：<pre><code> $(this).addClass(&quot;divCurrColor&quot;).next(&quot;.divContent&quot;).css(&quot;display&quot;,&quot;block&quot;);  
newTrigger().withIdentity( &quot;trigger3&quot;, &quot;group1&quot;).startAt( startTime)
.withSchedule(simpleSchedule().withIntervalInSeconds(10).withRepeatCount(10)).build();
</code></pre></li>
</ol>
<h1 id="四：Quartz体系结构"><a href="#四：Quartz体系结构" class="headerlink" title="四：Quartz体系结构"></a>四：Quartz体系结构</h1><h2 id="三大核心"><a href="#三大核心" class="headerlink" title="三大核心"></a>三大核心</h2><ul>
<li>调度器</li>
<li>任务</li>
<li>触发器<br><img src="/2017/12/27/Quartz学习——Quartz介绍-一/zy.jpg" alt="zy"></li>
</ul>
<h2 id="重要组成"><a href="#重要组成" class="headerlink" title="重要组成"></a>重要组成</h2><p>1）任务：</p>
<ul>
<li>Job：表示一个工作，要执行的具体内容。此接口中只有一个方法。要创建一个任务，必须得实现这个接口。该接口只有一个execute方法，任务每次被调用的时候都会执行这个execute方法的逻辑，类似TimerTask的run方法，在里面编写业务逻辑。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">public class TestJob implements Job &#123;</div><div class="line">      /**把要执行的操作，写在execute方法中  */</div><div class="line">      @Override</div><div class="line">      public void execute(JobExecutionContext jobExecutionContext) throws JobExecutionException &#123;</div><div class="line">          SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;);</div><div class="line">          System.out.println(&quot;I can do something...&quot;);</div><div class="line">          System.out.println(sdf.format(new Date()));</div><div class="line">      &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>生命周期：在每次调度器执行job时，它在调用execute方法前会创建一个新的job实例，当调用完成之后，关联的job对象实例会被释放，释放的实例会被垃圾回收机制回收。</p>
<ul>
<li><p>JobBuilder：可向任务传递数据,通常情况下,我们使用它就可向任务类发送数据了，如有特别复杂的传递参数,它提供了一个传递递:JobDataMap对象的方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">JobDetail jobDetail =  JobBuilder.newJob(TestJob.class).withIdentity(&quot;testJob&quot;,&quot;group1&quot;).build();</div></pre></td></tr></table></figure>
</li>
<li><p>JobDetail：用来保存我们任务的详细信息。一个JobDetail可以有多个Trigger，但是一个Trigger只能对应一个JobDetail。下面是JobDetail的一些常用的属性和含义：<br><img src="/2017/12/27/Quartz学习——Quartz介绍-一/aa.png" alt="aa"></p>
</li>
<li><p>JobStore：负责跟踪所有你给scheduler的“工作数据”：jobs, triggers, calendars, 等。</p>
<ol>
<li><p>RAMJobStore：是使用最简单的也是最高效(依据CPU时间)的JobStore 。RAMJobStore 正如它名字描述的一样，它保存数据在RAM。缺点是你的应用结束之后所有的数据也丢失了–这意味着RAMJobStore 不具有保持job和trigger持久的能力。对于一些程序是可以接受的，甚至是期望的，但对于其他的程序可能是灾难性的。使用RAMJobStore配置Quartz：配置如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">org.quartz.jobStore.class = org.quartz.simpl.RAMJobStore：是使用最简单的也是最高效</div></pre></td></tr></table></figure>
</li>
<li><p>JDBCJobStore：以JDBC的方式保存数据在数据库中。它比RAMJobStore的配置复杂一点，也没有RAMJobStore快。然而,性能缺点不是糟透了,特别是如果你在数据库表主键上建立了索引。在机器之间的LAN(在scheduler 和数据库之间)合理的情况下，检索和更新一个被触发的Trigger花费的时间少于10毫秒。几乎适用于所有的数据库，广泛用于 Oracle。PostgreSQL, MySQL, MS SQLServer, HSQLDB, 和DB2。使用JDBCJobStore之前你必须首先创建一系列Quartz要使用的表。你可以发现表创建语句在Quartz发布目录的 “docs/dbTables”下面。你需要确定你的应用要使用的事务类型。如果你不想绑定调度命令(例如增加和移除Trigger)到其他的事务，你可以使用JobStoreTX (最常用的选择)作为你的Jobstore。如果你需要Quartz和其他的事务(例如在J2EE应用服务器中)一起工作，你应该使用JobStoreCMT ，Quartz 将让应用服务器容器管理这个事务。使用JobStoreTx配置Quartz：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX  </div><div class="line">  org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate  </div><div class="line">  #配置表的前缀  </div><div class="line">  org.quartz.jobStore.tablePrefix = QRTZ_  </div><div class="line">  #使用JNDI数据源的时候，数据源的名字  </div><div class="line">  org.quartz.jobStore.dataSource = myDS</div></pre></td></tr></table></figure>
</li>
<li><p>TerracottaJobStore：提供了一个方法：在不使用数据库的情况下使它具有收缩性和强壮性。可以是集群的也可以是非集群的，在这两种情况下为你的job数据提供了一个存储机制用于应用程序重启之间持久,因为数据是存储在Terracotta服务器。它的性能比使用数据库访问JDBCJobStore好一点儿(大约是一个数量级)，但是明显比RAMJobStore慢。使用TerracottaJobStore配置Quartz：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">org.quartz.jobStore.class = org.terracotta.quartz.TerracottaJobStore  </div><div class="line">  org.quartz.jobStore.tcConfigUrl = localhost:9510</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>JobDataMap：中可以包含不限量的（序列化的）数据对象，在job实例执行的时候，可以使用其中的数据；JobDataMap是Java Map接口的一个实现，额外增加了一些便于存取基本类型的数据的方法。</p>
<ol>
<li><p>存：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">JobDetail jobDetail =  JobBuilder.newJob(TestJob.class).withIdentity(&quot;testJob&quot;,&quot;group1&quot;).usingJobData(&quot;date1&quot;,&quot;存内容&quot;).build();</div></pre></td></tr></table></figure>
</li>
<li><p>取：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">public class TestJob implements Job &#123;</div><div class="line">      /**把要执行的操作，写在execute方法中  */</div><div class="line">      @Override</div><div class="line">      public void execute(JobExecutionContext jobExecutionContext) throws JobExecutionException &#123;</div><div class="line">          JobKey key = jobExecutionContext.getJobDetail().getKey();</div><div class="line">          JobDataMap jobDataMap = jobExecutionContext.getJobDetail().getJobDataMap();</div><div class="line">          String date1 = jobDataMap.getString(&quot;date1&quot;);</div><div class="line">      &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<p>2）触发器：用来触发执行Job<br><img src="/2017/12/27/Quartz学习——Quartz介绍-一/trigger.png" alt="trigger"><br>2.1）触发器通用属性：</p>
<ul>
<li>Jobkey：表示job实例的标识，触发器被触发时，该指定的job实例会被执行</li>
<li>StartTime：表示触发器的时间表首次被触发的时间，它的值类型为：java.util.Date</li>
<li>EndTime：指定触发器的不再被触发的时间，它的值类型为：java.util.Date</li>
</ul>
<p>2.2）触发器类型：</p>
<ul>
<li>SimpleTrigger： 主要是针对一些相对简单的时间触发进行配置使用，比如在指定的时间开始然后在一定的时间间隔之内重复执行一个Job，同时可以任意指定重复的次数。用来触发只需执行一次或者在给定时间触发并且重复N次且每次执行延迟一定时间的任务。 下面就是使用一个SimpleTrigger的例子:<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">//创建触发器 每3秒钟执行一次(无开始时间和结束时间)</div><div class="line">  Trigger trigger = TriggerBuilder.newTrigger()</div><div class="line">              .withIdentity(&quot;trigger1&quot;, &quot;group3&quot;)</div><div class="line">              .withSchedule(</div><div class="line">              SimpleScheduleBuilder.simpleSchedule()</div><div class="line">              .withIntervalInSeconds(3).repeatForever()).build();</div><div class="line">  //创建触发器 每3秒钟执行一次(有开始时间和结束时间)</div><div class="line">   long now = new Date().getTime();</div><div class="line">  Date start = new Date(now+6000);</div><div class="line">  Date end = new Date(now+12000);</div><div class="line">  //创建触发器 每3秒钟执行一次</div><div class="line">  Trigger trigger = TriggerBuilder.newTrigger()</div><div class="line">                    .withIdentity(&quot;trigger1&quot;, &quot;group3&quot;)</div><div class="line">                    .startAt(start)</div><div class="line">                    .endAt(end)</div><div class="line">                    .withSchedule(SimpleScheduleBuilder.simpleSchedule().withIntervalInSeconds(3).repeatForever()).build();</div></pre></td></tr></table></figure>
</li>
</ul>
<p>SimpleTrigger具有丰富的构造函数，根据业务需求构造不同的构造函数。</p>
<ul>
<li>CronTrigger： 可以配置更复杂的触发时刻表，基于日历的作业触发器，而不像SimpleTrigger那样精确指定间隔时间，按照日历触发，例如“每个周五”，每个月10日中午或者10：15分。比SimpleTrigger更加常用。</li>
</ul>
<p>Cron表达式：用于配置CronTrigger实例，是由7个表达式组成的字符串，描述了时间表的详细信息。</p>
<p>格式为：[秒][分][时][日][月][周][年]</p>
<p>Cron表达式特殊字符意义对应表：<br><img src="/2017/12/27/Quartz学习——Quartz介绍-一/table.png" alt="table"><br>通配符说明：<br><img src="/2017/12/27/Quartz学习——Quartz介绍-一/tongpeifu.png" alt="tongpeifu"><br>Cron表达式例子：<br><img src="/2017/12/27/Quartz学习——Quartz介绍-一/bds.png" alt="bds"></p>
<pre><code>TriggerBuilder.newTrigger().withIdentity(&quot;trigger2&quot;,&quot;group2&quot;).withSchedule(CronScheduleBuilder.cronSchedule(&quot;0 0 9 ? * 6L *&quot;)).build();
</code></pre><p>Cron表达式小技巧：</p>
<ol>
<li><p>‘L’和‘W’可以一起组合使用</p>
</li>
<li><p>周字段英文字母不区分大小写即MOM与mom相同</p>
</li>
<li><p>利用工具，在线生成cron表达式：cron.qqe2.com/</p>
</li>
</ol>
<p>NthIncludedDayTrigger：是 Quartz 开发团队最新加入到框架中的一个 Trigger。它设计用于在每一间隔类型的第几天执行 Job。例如，你要在每个月的 15 号执行开票的 Job，用 NthIncludedDayTrigger就再合适不过了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NthIncludedDayTrigger trigger = new NthIncludedDayTrigger(&quot;NthIncludedDayTrigger&quot;,Scheduler.DEFAULT_GROUP);</div><div class="line">              trigger.setN(15);</div><div class="line">              trigger.setIntervalType(NthIncludedDayTrigger.INTERVAL_TYPE_MONTHLY);</div></pre></td></tr></table></figure>
<p>3）调度器Scheduler</p>
<p>代表一个Quartz的独立运行容器，Trigger和JobDetail可以注册到Scheduler中，两者在Scheduler中拥有各自的组及名称，组及名称是Scheduler查找定位容器中某一对象的依据，Trigger的组及名称必须唯一，JobDetail的组和名称也必须唯一（但可以和Trigger的组和名称相同，因为它们是不同类型的）。Scheduler定义了多个接口方法，允许外部通过组及名称访问和控制容器中Trigger和JobDetail。</p>
<p>Scheduler可以将Trigger绑定到某一JobDetail中，这样当Trigger触发时，对应的Job就被执行。一个Job可以对应多个Trigger，但一个Trigger只能对应一个Job。</p>
<p>可以通过SchedulerFactory创建一个Scheduler实例。Scheduler拥有一个SchedulerContext，它类似于ServletContext，保存着Scheduler上下文信息，Job和Trigger都可以访问SchedulerContext内的信息。SchedulerContext内部通过一个Map，以键值对的方式维护这些上下文数据，SchedulerContext为保存和获取数据提供了多个put()和getXxx()的方法。可以通过Scheduler# getContext()获取对应的SchedulerContext实例；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">SchedulerFactory schedulerfactory=new StdSchedulerFactory();</div><div class="line">    Scheduler scheduler = schedulerfactory.getScheduler();</div><div class="line"></div><div class="line">     DirectSchedulerFactory factory = DirectSchedulerFactory.getInstance();</div><div class="line">    try &#123;</div><div class="line">        Scheduler scheduler = factory.getScheduler();</div><div class="line">    &#125; catch (SchedulerException e) &#123;</div><div class="line">        e.printStackTrace();</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>4)SchedulerFactory:</p>
<ul>
<li>使用一组参数（java.util.Properties）来创建和出书啊Quartz调度器</li>
<li>配置参数一般存储在quartz.properties中</li>
<li>调用getScheduler方法就能创建和初始化调度器</li>
</ul>
<p>5)quartz.properties:</p>
<p>Quartz-Job的quartz.properties配置文件说明，此文件在quartz的jar包有，可直接拿过来使用不过只有基本的几个配置 自己可根据需要进行扩充；另外如果项目中没有对该配置文件重写，则Quartz会加载自己jar包中的quartz.properties文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line"># Default Properties file for use by StdSchedulerFactory  </div><div class="line">    # to create a Quartz Scheduler Instance, if a different  </div><div class="line">    # properties file is not explicitly specified.  </div><div class="line">    #  </div><div class="line">    # ===========================================================================  </div><div class="line">    # Configure Main Scheduler Properties 调度器属性  </div><div class="line">    # ===========================================================================  </div><div class="line">    org.quartz.scheduler.instanceName: DefaultQuartzScheduler  </div><div class="line">    #org.quartz.scheduler.instanceid:AUTO  </div><div class="line">    org.quartz.scheduler.rmi.export: false  </div><div class="line">    org.quartz.scheduler.rmi.proxy: false  </div><div class="line">    org.quartz.scheduler.wrapJobExecutionInUserTransaction: false  </div><div class="line">    # ===========================================================================    </div><div class="line">    # Configure ThreadPool 线程池属性    </div><div class="line">    # ===========================================================================  </div><div class="line">    #线程池的实现类（一般使用SimpleThreadPool即可满足几乎所有用户的需求）  </div><div class="line">    org.quartz.threadPool.class: org.quartz.simpl.SimpleThreadPool  </div><div class="line">    #指定线程数，至少为1（无默认值）(一般设置为1-100直接的整数合适)  </div><div class="line">    org.quartz.threadPool.threadCount: 10  </div><div class="line">    #设置线程的优先级（最大为java.lang.Thread.MAX_PRIORITY 10，最小为Thread.MIN_PRIORITY 1，默认为5）  </div><div class="line">    org.quartz.threadPool.threadPriority: 5  </div><div class="line">    #设置SimpleThreadPool的一些属性  </div><div class="line">    #设置是否为守护线程  </div><div class="line">    #org.quartz.threadpool.makethreadsdaemons = false  </div><div class="line">    #org.quartz.threadPool.threadsInheritContextClassLoaderOfInitializingThread: true  </div><div class="line">    #org.quartz.threadpool.threadsinheritgroupofinitializingthread=false  </div><div class="line">    #线程前缀默认值是：[Scheduler Name]_Worker  </div><div class="line">    #org.quartz.threadpool.threadnameprefix=swhJobThead;  </div><div class="line">    # 配置全局监听(TriggerListener,JobListener) 则应用程序可以接收和执行 预定的事件通知  </div><div class="line">    # ===========================================================================  </div><div class="line">    # Configuring a Global TriggerListener 配置全局的Trigger监听器  </div><div class="line">    # MyTriggerListenerClass 类必须有一个无参数的构造函数，和 属性的set方法，目前2.2.x只支持原始数据类型的值（包括字符串）  </div><div class="line">    # ===========================================================================  </div><div class="line">    #org.quartz.triggerListener.NAME.class = com.swh.MyTriggerListenerClass  </div><div class="line">    #org.quartz.triggerListener.NAME.propName = propValue  </div><div class="line">    #org.quartz.triggerListener.NAME.prop2Name = prop2Value  </div><div class="line">    # ===========================================================================  </div><div class="line">    # Configuring a Global JobListener 配置全局的Job监听器  </div><div class="line">    # MyJobListenerClass 类必须有一个无参数的构造函数，和 属性的set方法，目前2.2.x只支持原始数据类型的值（包括字符串）  </div><div class="line">    # ===========================================================================  </div><div class="line">    #org.quartz.jobListener.NAME.class = com.swh.MyJobListenerClass  </div><div class="line">    #org.quartz.jobListener.NAME.propName = propValue  </div><div class="line">    #org.quartz.jobListener.NAME.prop2Name = prop2Value  </div><div class="line">    # ===========================================================================    </div><div class="line">    # Configure JobStore 存储调度信息（工作，触发器和日历等）  </div><div class="line">    # ===========================================================================  </div><div class="line">    # 信息保存时间 默认值60秒  </div><div class="line">    org.quartz.jobStore.misfireThreshold: 60000  </div><div class="line">    #保存job和Trigger的状态信息到内存中的类  </div><div class="line">    org.quartz.jobStore.class: org.quartz.simpl.RAMJobStore  </div><div class="line">    # ===========================================================================    </div><div class="line">    # Configure SchedulerPlugins 插件属性 配置  </div><div class="line">    # ===========================================================================  </div><div class="line">    # 自定义插件    </div><div class="line">    #org.quartz.plugin.NAME.class = com.swh.MyPluginClass  </div><div class="line">    #org.quartz.plugin.NAME.propName = propValue  </div><div class="line">    #org.quartz.plugin.NAME.prop2Name = prop2Value  </div><div class="line">    #配置trigger执行历史日志（可以看到类的文档和参数列表）  </div><div class="line">    org.quartz.plugin.triggHistory.class = org.quartz.plugins.history.LoggingTriggerHistoryPlugin    </div><div class="line">    org.quartz.plugin.triggHistory.triggerFiredMessage = Trigger &#123;1&#125;.&#123;0&#125; fired job &#123;6&#125;.&#123;5&#125; at: &#123;4, date, HH:mm:ss MM/dd/yyyy&#125;    </div><div class="line">    org.quartz.plugin.triggHistory.triggerCompleteMessage = Trigger &#123;1&#125;.&#123;0&#125; completed firing job &#123;6&#125;.&#123;5&#125; at &#123;4, date, HH:mm:ss MM/dd/yyyy&#125; with resulting trigger instruction code: &#123;9&#125;    </div><div class="line">    #配置job调度插件  quartz_jobs(jobs and triggers内容)的XML文档    </div><div class="line">    #加载 Job 和 Trigger 信息的类   （1.8之前用：org.quartz.plugins.xml.JobInitializationPlugin）  </div><div class="line">    org.quartz.plugin.jobInitializer.class = org.quartz.plugins.xml.XMLSchedulingDataProcessorPlugin  </div><div class="line">    #指定存放调度器(Job 和 Trigger)信息的xml文件，默认是classpath下quartz_jobs.xml  </div><div class="line">    org.quartz.plugin.jobInitializer.fileNames = my_quartz_job2.xml    </div><div class="line">    #org.quartz.plugin.jobInitializer.overWriteExistingJobs = false    </div><div class="line">    org.quartz.plugin.jobInitializer.failOnFileNotFound = true    </div><div class="line">    #自动扫描任务单并发现改动的时间间隔,单位为秒  </div><div class="line">    org.quartz.plugin.jobInitializer.scanInterval = 10  </div><div class="line">    #覆盖任务调度器中同名的jobDetail,避免只修改了CronExpression所造成的不能重新生效情况  </div><div class="line">    org.quartz.plugin.jobInitializer.wrapInUserTransaction = false  </div><div class="line">    # ===========================================================================    </div><div class="line">    # Sample configuration of ShutdownHookPlugin  ShutdownHookPlugin插件的配置样例  </div><div class="line">    # ===========================================================================  </div><div class="line">    #org.quartz.plugin.shutdownhook.class = \org.quartz.plugins.management.ShutdownHookPlugin  </div><div class="line">    #org.quartz.plugin.shutdownhook.cleanShutdown = true  </div><div class="line">    #  </div><div class="line">    # Configure RMI Settings 远程服务调用配置  </div><div class="line">    #  </div><div class="line">    #如果你想quartz-scheduler出口本身通过RMI作为服务器，然后设置“出口”标志true(默认值为false)。  </div><div class="line">    #org.quartz.scheduler.rmi.export = false  </div><div class="line">    #主机上rmi注册表(默认值localhost)  </div><div class="line">    #org.quartz.scheduler.rmi.registryhost = localhost  </div><div class="line">    #注册监听端口号（默认值1099）  </div><div class="line">    #org.quartz.scheduler.rmi.registryport = 1099  </div><div class="line">    #创建rmi注册，false/never：如果你已经有一个在运行或不想进行创建注册  </div><div class="line">    # true/as_needed:第一次尝试使用现有的注册，然后再回来进行创建  </div><div class="line">    # always:先进行创建一个注册，然后再使用回来使用注册  </div><div class="line">    #org.quartz.scheduler.rmi.createregistry = never  </div><div class="line">    #Quartz Scheduler服务端端口，默认是随机分配RMI注册表  </div><div class="line">    #org.quartz.scheduler.rmi.serverport = 1098  </div><div class="line">    #true:链接远程服务调度(客户端),这个也要指定registryhost和registryport，默认为false  </div><div class="line">    # 如果export和proxy同时指定为true，则export的设置将被忽略  </div><div class="line">    #org.quartz.scheduler.rmi.proxy = false</div></pre></td></tr></table></figure>
<h1 id="五：存储方式"><a href="#五：存储方式" class="headerlink" title="五：存储方式"></a>五：存储方式</h1><p>RAMJobStore:<br>优点：不要外部数据库，配置容易，运行速度快<br>缺点：因为调度程序信息是存储在被分配给JVM的内存里面，所以，当应用程序停止运行时，所有调度信息将被丢失。另外因为存储到JVM内存里面，所以可以存储多少个Job和Trigger将会受到限制<br>JDBCJobStore:<br>优点：支持集群，因为所有的任务信息都会保存到数据库中，可以控制事物，还有就是如果应用服务器关闭或者重启，任务信息都不会丢失，并且可以恢复因服务器关闭或者重启而导致执行失败的任务<br>缺点：运行速度的快慢取决与连接数据库的快慢</p>
<h2 id="表关系和解释"><a href="#表关系和解释" class="headerlink" title="表关系和解释"></a>表关系和解释</h2><p><img src="/2017/12/27/Quartz学习——Quartz介绍-一/quartz表结构.png" alt="quartz表结构"></p>
<table>
<thead>
<tr>
<th>Tables</th>
<th style="text-align:center">Means</th>
</tr>
</thead>
<tbody>
<tr>
<td>qrtz_blob_triggers</td>
<td style="text-align:center">Trigger作为Blob类型存储(用于Quartz用户用JDBC创建他们自己定制的Trigger类型，JobStore 并不知道如何存储实例的时候)</td>
</tr>
<tr>
<td>qrtz_calendars</td>
<td style="text-align:center">以Blob类型存储Quartz的Calendar日历信息， quartz可配置一个日历来指定一个时间范围</td>
</tr>
<tr>
<td>qrtz_cron_triggers</td>
<td style="text-align:center">存储Cron Trigger，包括Cron表达式和时区信息。</td>
</tr>
<tr>
<td>qrtz_fired_triggers</td>
<td style="text-align:center">存储与已触发的Trigger相关的状态信息，以及相联Job的执行信息</td>
</tr>
<tr>
<td>qrtz_job_details</td>
<td style="text-align:center">存储每一个已配置的Job的详细信息</td>
</tr>
<tr>
<td>qrtz_locks</td>
<td style="text-align:center">存储程序的非观锁的信息(假如使用了悲观锁)</td>
</tr>
<tr>
<td>qrtz_paused_trigger_graps</td>
<td style="text-align:center">存储已暂停的Trigger组的信息</td>
</tr>
<tr>
<td>qrtz_scheduler_state</td>
<td style="text-align:center">存储少量的有关 Scheduler的状态信息，和别的 Scheduler 实例(假如是用于一个集群中)</td>
</tr>
<tr>
<td>qrtz_simple_triggers</td>
<td style="text-align:center">存储简单的 Trigger，包括重复次数，间隔，以及已触的次数</td>
</tr>
<tr>
<td>qrtz_triggers</td>
<td style="text-align:center">存储已配置的 Trigger的信息</td>
</tr>
<tr>
<td>qrzt_simprop_triggers</td>
</tr>
</tbody>
</table>
<h2 id="思想"><a href="#思想" class="headerlink" title="思想"></a>思想</h2><pre><code>// 1、工厂模式 构建Scheduler的Factory，其中STD为Quartz默认的Factory  
//    开发者亦可自行实现自己的Factory;Job、Trigger等组件  
SchedulerFactory sf = new StdSchedulerFactory();  

// 2、通过SchedulerFactory构建Scheduler对象  
Scheduler sched = sf.getScheduler();  

// 3、org.quartz.DateBuilder.evenMinuteDate  -- 通过DateBuilder构建Date  
Date runTime = evenMinuteDate( new Date());  

// 4、org.quartz.JobBuilder.newJob &lt;下一分钟&gt; --通过JobBuilder构建Job  
JobDetail job = newJob(HelloJob.class).withIdentity(&quot;job1&quot;,&quot;group1&quot;).build();  

// 5、通过TriggerBuilder进行构建Trigger  
Trigger trigger = newTrigger().withIdentity(&quot;trigger1&quot;,&quot;group1&quot;)  
            .startAt(runTime).build();  

// 6、工厂模式，组装各个组件&lt;JOB，Trigger&gt;  
sched.scheduleJob (job, trigger);  

// 7、start   
sched.start();  

try {  
  Thread.sleep(65L * 1000L);  
} catch (Exception e) {  
}  

// 8、通过Scheduler销毁内置的Trigger和Job  
sched.shutdown(true);      
</code></pre><h2 id="一句话看懂Quartz"><a href="#一句话看懂Quartz" class="headerlink" title="一句话看懂Quartz"></a>一句话看懂Quartz</h2><ol>
<li>创建调度工厂();    //工厂模式</li>
<li>根据工厂取得调度器实例();  //工厂模式</li>
<li>Builder模式构建子组件<job,trigger>  // builder模式, 如JobBuilder、TriggerBuilder、DateBuilder</job,trigger></li>
<li>通过调度器组装子组件   调度器.组装&lt;子组件1,子组件2…&gt;  //工厂模式</li>
<li>调度器.start(); //工厂模式</li>
</ol>
<p>参考:<br><a href="http://blog.csdn.net/guolong1983811/article/details/51501346" target="_blank" rel="external">quartz详解2：quartz由浅入深</a><br><a href="https://www.cnblogs.com/drift-ice/p/3817269.html" target="_blank" rel="external">Quartz使用总结</a><br><a href="http://blog.csdn.net/chenweitang123/article/details/37777399" target="_blank" rel="external">Quartz深入浅出(一)</a><br><a href="http://blog.csdn.net/u010648555/article/details/54863144" target="_blank" rel="external">Quartz学习——Quartz大致介绍（一）</a><br><a href="https://www.tuicool.com/articles/3uQ7V3B" target="_blank" rel="external">深入解读Quartz任务调度器</a></p>
</div><div class="tags"><a href="/tags/quartz/">quartz</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2017/12/28/Dubbo学习——Dubbo介绍-一/" class="pre">Dubbo学习——Dubbo介绍(一)</a><a href="/2017/12/25/Oracle-VM-VirtualBox配置虚拟网卡-桥接-实现主机-虚拟机网络互通/" class="next">Oracle VM VirtualBox配置虚拟网卡(桥接),实现主机-虚拟机网络互通</a></div><div id="comments"><div id="SOHUCS" sid="2017/12/27/Quartz学习——Quartz介绍-一/"></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#一：介绍"><span class="toc-text">一：介绍</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二：quartz核心概念"><span class="toc-text">二：quartz核心概念</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三：Quartz中的设计模式"><span class="toc-text">三：Quartz中的设计模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#四：Quartz体系结构"><span class="toc-text">四：Quartz体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#三大核心"><span class="toc-text">三大核心</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#重要组成"><span class="toc-text">重要组成</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#五：存储方式"><span class="toc-text">五：存储方式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#表关系和解释"><span class="toc-text">表关系和解释</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#思想"><span class="toc-text">思想</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#一句话看懂Quartz"><span class="toc-text">一句话看懂Quartz</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/02/01/Java虚拟机学习——Java内存区域与内存溢出异常/">Java虚拟机学习——Java内存区域与内存溢出异常</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/31/IntelliJ-IDEA-2017-3激活/">IntelliJ IDEA 2017.3激活</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/31/Java虚拟机学习——类加载机制/">Java虚拟机学习——类加载机制</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/30/JDK1.8源码解析——String/">JDK1.8源码解析——String</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/30/成为Java顶尖程序员-，看这11本书就够了/">成为Java顶尖程序员 ，看这11本书就够了</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/27/解决微信公共号开发出现-redirect-uri域名与后台配置不一致，错误码10003-错误/">解决微信公共号开发出现 redirect_uri域名与后台配置不一致，错误码10003 错误</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/27/微信公共号开发教程java版——微信网页授权-八/">微信公共号开发教程java版——微信网页授权(八)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/27/微信公共号开发教程java版——获取用户基本信息-UnionID机制-七/">微信公共号开发教程java版——获取用户基本信息(UnionID机制)(七)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/26/微信公共号开发教程java版——实现自定义菜单-六/">微信公共号开发教程java版——实现自定义菜单(六)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/26/微信公共号开发教程java版——公共号access-token的获取-五/">微信公共号开发教程java版——公共号access_token的获取(五)</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Dubbo/">Dubbo</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/HttpClient/">HttpClient</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDEA/">IDEA</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JDK1-8源码/">JDK1.8源码</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JVM/">JVM</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringBoot/">SpringBoot</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WebService/">WebService</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/axios/">axios</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/element-ui/">element ui</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/extjs/">extjs</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/maven/">maven</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mybatis/">mybatis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/">nginx</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/oracle/">oracle</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/quartz/">quartz</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/select2/">select2</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/shiro/">shiro</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring/">spring</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tomcat/">tomcat</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/weblogic/">weblogic</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/webpack/">webpack</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ztree/">ztree</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/学习/">学习</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/微信公共号/">微信公共号</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编码规范/">编码规范</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/mybatis/" style="font-size: 15px;">mybatis</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/JDK1-8源码/" style="font-size: 15px;">JDK1.8源码</a> <a href="/tags/Dubbo/" style="font-size: 15px;">Dubbo</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/maven/" style="font-size: 15px;">maven</a> <a href="/tags/tomcat/" style="font-size: 15px;">tomcat</a> <a href="/tags/Oracle-VM-VirtualBox/" style="font-size: 15px;">Oracle VM VirtualBox</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/oracle/" style="font-size: 15px;">oracle</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/quartz/" style="font-size: 15px;">quartz</a> <a href="/tags/spring-aop/" style="font-size: 15px;">spring aop</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/SpringMVC/" style="font-size: 15px;">SpringMVC</a> <a href="/tags/WebService/" style="font-size: 15px;">WebService</a> <a href="/tags/SpringBoot/" style="font-size: 15px;">SpringBoot</a> <a href="/tags/HttpClient/" style="font-size: 15px;">HttpClient</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/extjs/" style="font-size: 15px;">extjs</a> <a href="/tags/webpack/" style="font-size: 15px;">webpack</a> <a href="/tags/shiro/" style="font-size: 15px;">shiro</a> <a href="/tags/weblogic/" style="font-size: 15px;">weblogic</a> <a href="/tags/select2/" style="font-size: 15px;">select2</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/axios/" style="font-size: 15px;">axios</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/微信公共号/" style="font-size: 15px;">微信公共号</a> <a href="/tags/java基础/" style="font-size: 15px;">java基础</a> <a href="/tags/element-ui/" style="font-size: 15px;">element ui</a> <a href="/tags/jquery/" style="font-size: 15px;">jquery</a> <a href="/tags/ztree/" style="font-size: 15px;">ztree</a> <a href="/tags/编码规范/" style="font-size: 15px;">编码规范</a> <a href="/tags/JVM/" style="font-size: 15px;">JVM</a> <a href="/tags/java虚拟机/" style="font-size: 15px;">java虚拟机</a> <a href="/tags/学习/" style="font-size: 15px;">学习</a> <a href="/tags/工具/" style="font-size: 15px;">工具</a> <a href="/tags/IDEA/" style="font-size: 15px;">IDEA</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://github.com/wangyuanjun008" title="GitHub" target="_blank">GitHub</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">WangYuanJun.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script><script>window._config = { showScore: true };
(function(){ 
  var appid = 'cytn089Dg'; 
  var conf = '4501ebcf59ba2646236d1827a7751555'; 
  var width = window.innerWidth || document.documentElement.clientWidth; 
  var nodes =document.getElementsByTagName("head")[0]||document.head||document.documentElement;
  if (/(Android|iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent) && width < 750) {  
      window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>');
  }
  else { 
    var loadJs=function(d,a){
      var b=document.createElement("script");b.setAttribute("type","text/javascript");
      b.setAttribute("charset","UTF-8");
      b.setAttribute("src",d);
      if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}
      nodes.appendChild(b)
    };
    loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); 
  } 
  var loadCss = function(cssString){  
    var style=document.createElement("style");  
    style.setAttribute("type", "text/css");  
    if(style.styleSheet){// IE  
        style.styleSheet.cssText = cssString;  
    } else {// w3c  
        var cssText = document.createTextNode(cssString);  
        style.appendChild(cssText);  
    }
    nodes.appendChild(style);
  }
  window.onload=function(){loadCss('.module-hot-topic,.module-cmt-float-bar{display:none!important}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .wrap-action-w .cbox-prompt-w span.prompt-empty-w,#SOHUCS #SOHU_MAIN .module-cmt-float-bar .wrap-cont-w .cont-form-w .form-text-w span.text-null,#SOHUCS #SOHU_MAIN .module-cmt-float-bar .wrap-cont-w .cont-minwidth-w div.cont-comment-w a.comment-link-w,#SOHUCS #SOHU_MAIN .module-cmt-float-bar .wrap-cont-w .cont-minwidth-w div.cont-comment-w span.comment-text-w,#SOHUCS #SOHU_MAIN .module-cmt-footer .section-service-w div.service-wrap-w a:hover,#SOHUCS #SOHU_MAIN .module-cmt-header .section-cbox-w .block-head-w div.header-login,#SOHUCS #SOHU_MAIN .module-cmt-header .section-title-w .title-user-w .user-wrap-w span.wrap-name-w,#SOHUCS #SOHU_MAIN .module-cmt-list .action-click-gw span.click-disable-eg a em.icon-name-bg,#SOHUCS #SOHU_MAIN .module-cmt-list .block-title-gw ul li div.title-name-gw,#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type .cmt-list-number .comment-number span.cy-number,#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type .cmt-list-number span.comment-number,#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type .type-lists li.active,#SOHUCS #SOHU_MAIN .module-cmt-list .msg-wrap-gw .wrap-action-gw .action-click-gw span a:hover,#SOHUCS #SOHU_MAIN .module-cmt-list .picture-box-gw div.box-action-gw a:hover,#SOHUCS #SOHU_MAIN .module-cmt-list .wrap-action-gw .action-click-gw span a:hover em.icon-name-bg,#SOHUCS #SOHU_MAIN .module-cmt-list .wrap-user-gw span.user-name-gw a{color:#40759b!important}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .post-wrap-border-t div.post-wrap-border-t-r,#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w div.post-wrap-border-l,#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w div.post-wrap-border-r{display:none!important}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .post-wrap-border-t div.post-wrap-border-t-l{background:#FFF!important;top:-2px!important}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .wrap-action-w .action-function-w .uploading-wrapper-dw div.wrapper-image-dw,#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w div.post-wrap-main,#SOHUCS #SOHU_MAIN .module-cmt-float-bar .wrap-cont-w .cont-form-w div.form-text-w,#SOHUCS #SOHU_MAIN .module-cmt-header .section-cbox-w .block-head-w div.header-login,#SOHUCS #SOHU_MAIN .module-cmt-list .module-cmt-box .post-wrap-w div.post-wrap-main{border:1px solid #e6e6e6!important;border-radius:20px 20px 20px 20px;margin:0!important}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .wrap-action-w .action-issue-w .issue-btn-w a .btn-fw{width:130px!important;height:34px!important;line-height:33px!important;font-size:17px!important;background:#5483b1!important;border-radius:20px!important;color:#FFF!important;-webkit-box-shadow:0 -1px 4px #5483b1 inset;box-shadow:0 -1px 10px #5483b1 inset}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .wrap-action-w .action-issue-w .issue-btn-w a .btn-fw:before{content:"发表评论"}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .wrap-action-w .action-issue-w .issue-btn-w a:hover .btn-fw{color:#40759b!important;background:#FFF!important}#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type .type-lists li{background:none!important;border-bottom:1px solid #e6e6e6}#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type .type-lists li.active{border:1px solid #e6e6e6;border-radius:10px 10px 0 0;border-bottom:none}#SOHUCS #SOHU_MAIN .module-cmt-list .block-title-gw ul li .title-name-gw div.title-name-gw-tag{background:#5483b1!important;border-radius:3px}#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type div.cmt-list-border{background-color:#e6e6e6!important}#SOHUCS #SOHU_MAIN .module-cmt-notice ul.nt-list li.nt-item{border:1px solid #e6e6e6!important}#SOHUCS #SOHU_MAIN .module-cmt-notice ul.nt-list li.nt-item .nt-logo{text-align:center;line-height:40px;border-radius:50%!important;background:#e6e6e6!important}#SOHUCS #SOHU_MAIN .module-cmt-notice ul.nt-list li.nt-item .nt-logo:before{content:"畅";font-size:22px;color:#FFF}#SOHUCS #SOHU_MAIN .module-cmt-notice ul.nt-list li.nt-item a.nt-text,#SOHUCS #SOHU_MAIN .module-cmt-notice ul.nt-list li.nt-item a.nt-text i{color:#5483b1!important}#SOHUCS #SOHU_MAIN .module-cmt-header .section-title-w .title-user-w .user-wrap-w{background:#FFF!important}');};
})();</script><script src="https://assets.changyan.sohu.com/upload/plugins/plugins.count.js"></script></body></html>